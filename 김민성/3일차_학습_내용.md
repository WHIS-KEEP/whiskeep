# 쿠버네티스 학습 내용 정리

## 쿠버네티스 기본 개념

### 쿠버네티스란?
- 컨테이너화된 애플리케이션을 자동으로 배포, 스케일링 및 관리하기 위한 오픈소스 플랫폼
- Google에서 개발하고 CNCF(Cloud Native Computing Foundation)에서 관리
- 대규모 분산 시스템을 효율적으로 운영하기 위한 솔루션

### 주요 특징
- **자동화된 배포 및 롤백**: 애플리케이션의 배포와 업데이트를 자동화
- **서비스 디스커버리와 로드 밸런싱**: 내부 DNS와 로드 밸런싱을 통한 서비스 관리
- **스토리지 오케스트레이션**: 로컬, 클라우드 등 다양한 스토리지 시스템 지원
- **자동화된 롤아웃과 롤백**: 상태 변화를 모니터링하며 자동으로 관리
- **자가 복구(Self-healing)**: 실패한 컨테이너를 재시작하고 비정상 노드를 교체
- **시크릿 및 구성 관리**: 민감한 정보를 저장하고 관리하는 기능

## 쿠버네티스 아키텍처

### 마스터 컴포넌트 (컨트롤 플레인)
- **kube-apiserver**: API 서버로 쿠버네티스 API를 노출
- **etcd**: 모든 클러스터 데이터를 저장하는 키-값 저장소
- **kube-scheduler**: 새로 생성된 Pod를 노드에 할당
- **kube-controller-manager**: 컨트롤러 프로세스를 실행하는 컴포넌트

### 노드 컴포넌트
- **kubelet**: 각 노드에서 실행되며 컨테이너가 Pod에서 실행되도록 관리
- **kube-proxy**: 네트워크 규칙을 유지하고 연결을 포워딩
- **컨테이너 런타임**: Docker, containerd, CRI-O 등의 컨테이너 실행환경

## 기본 오브젝트 및 워크로드 리소스

### 기본 오브젝트
- **Pod**: 쿠버네티스의 가장 기본적인 배포 단위, 하나 이상의 컨테이너 그룹
- **Service**: Pod 집합에 대한 단일 접점과 로드밸런싱 제공
- **Volume**: 데이터 저장 및 Pod 간 데이터 공유
- **Namespace**: 동일한 물리 클러스터를 기반으로 하는 가상 클러스터를 제공

### 워크로드 리소스
- **Deployment**: Pod와 ReplicaSet에 대한 선언적 업데이트 제공
- **StatefulSet**: 상태 유지가 필요한 애플리케이션을 위한 워크로드 리소스
- **DaemonSet**: 모든 노드에서 특정 Pod가 실행되도록 보장
- **Job**: 완료 후 종료되는 일회성 작업 실행
- **CronJob**: 스케줄에 따라 주기적으로 Job 실행

## 서비스 디스커버리 및 네트워킹

### 서비스 유형
- **ClusterIP**: 클러스터 내부에서만 접근 가능한 서비스
- **NodePort**: 각 노드의 IP와 포트를 통해 외부에서 접근 가능
- **LoadBalancer**: 클라우드 제공자의 로드 밸런서를 사용하여 서비스 노출
- **ExternalName**: 외부 서비스를 내부에서 참조할 때 사용

### 인그레스(Ingress)
- HTTP 및 HTTPS 라우팅을 통한 클러스터 외부에서 클러스터 서비스로의 접근 관리
- TLS 종료, 가상 호스팅, 로드 밸런싱 기능 제공

## 스토리지

### 영구 볼륨(PV)과 영구 볼륨 클레임(PVC)
- **PersistentVolume (PV)**: 관리자가 프로비저닝한 스토리지 리소스
- **PersistentVolumeClaim (PVC)**: 사용자가 요청하는 스토리지 리소스
- **StorageClass**: 스토리지의 "클래스"를 정의하는 방법 제공

## 구성 및 보안

### ConfigMap과 Secret
- **ConfigMap**: 설정 데이터를 키-값 쌍으로 저장
- **Secret**: 암호, 토큰, 키 등의 민감한 정보를 저장

### RBAC(Role-Based Access Control)
- **Role과 ClusterRole**: 권한의 집합 정의
- **RoleBinding과 ClusterRoleBinding**: 사용자에게 역할 부여

## 헬스 체크 및 자가 복구

### Liveness, Readiness, Startup 프로브
- **Liveness Probe**: 컨테이너가 살아있는지 확인
- **Readiness Probe**: 컨테이너가 요청을 처리할 준비가 되었는지 확인
- **Startup Probe**: 애플리케이션이 시작되었는지 확인

## 클러스터 관리

### 클러스터 확장
- **Horizontal Pod Autoscaler (HPA)**: Pod 수를 자동으로 조정
- **Vertical Pod Autoscaler (VPA)**: Pod의 리소스 요청을 자동으로 조정
- **Cluster Autoscaler**: 워크로드에 따라 클러스터 노드 수를 자동으로 조정

### 리소스 관리
- **Request와 Limit**: CPU 및 메모리 리소스 요청과 제한 설정
- **QoS (Quality of Service)**: Pod의 우선순위 설정

## 쿠버네티스 운영 도구

### 주요 도구
- **kubectl**: 쿠버네티스 클러스터 제어를 위한 커맨드라인 도구
- **Helm**: 쿠버네티스 패키지 관리자
- **Kustomize**: 쿠버네티스 YAML 파일 관리 도구
- **Prometheus & Grafana**: 모니터링 및 알림 도구
- **Istio**: 서비스 메시 구현 도구

### 로깅 및 모니터링
- **EFK/ELK Stack**: Elasticsearch, Fluentd/Logstash, Kibana를 이용한 로깅 솔루션
- **Prometheus**: 메트릭 수집 및 알림
- **Grafana**: 데이터 시각화 및 모니터링